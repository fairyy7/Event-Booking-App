{"version":3,"names":["getDevices","devices","out","execa","sync","parseXctraceIOSDevicesList","stderr","stdout","e","logger","warn","parseIOSDevicesList"],"sources":["../../src/tools/getDevices.ts"],"sourcesContent":["import execa from 'execa';\nimport {logger} from '@react-native-community/cli-tools';\nimport parseIOSDevicesList from './parseIOSDevicesList';\nimport parseXctraceIOSDevicesList from './parseXctraceIOSDevicesList';\nimport {Device} from '../types';\n\nexport function getDevices(): Device[] {\n  let devices;\n  try {\n    const out = execa.sync('xcrun', ['xctrace', 'list', 'devices']);\n    devices = parseXctraceIOSDevicesList(\n      // Xcode 12.5 introduced a change to output the list to stdout instead of stderr\n      out.stderr === '' ? out.stdout : out.stderr,\n    );\n  } catch (e) {\n    logger.warn(\n      'Support for Xcode 11 and older is deprecated. Please upgrade to Xcode 12.',\n    );\n    devices = parseIOSDevicesList(\n      execa.sync('xcrun', ['instruments', '-s']).stdout,\n    );\n  }\n  return devices;\n}\n"],"mappings":";;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;AACA;AAAsE;AAG/D,SAASA,UAAU,GAAa;EACrC,IAAIC,OAAO;EACX,IAAI;IACF,MAAMC,GAAG,GAAGC,gBAAK,CAACC,IAAI,CAAC,OAAO,EAAE,CAAC,SAAS,EAAE,MAAM,EAAE,SAAS,CAAC,CAAC;IAC/DH,OAAO,GAAG,IAAAI,mCAA0B;IAClC;IACAH,GAAG,CAACI,MAAM,KAAK,EAAE,GAAGJ,GAAG,CAACK,MAAM,GAAGL,GAAG,CAACI,MAAM,CAC5C;EACH,CAAC,CAAC,OAAOE,CAAC,EAAE;IACVC,kBAAM,CAACC,IAAI,CACT,2EAA2E,CAC5E;IACDT,OAAO,GAAG,IAAAU,4BAAmB,EAC3BR,gBAAK,CAACC,IAAI,CAAC,OAAO,EAAE,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC,CAACG,MAAM,CAClD;EACH;EACA,OAAON,OAAO;AAChB"}